(function(e){function t(t){for(var r,s,o=t[0],c=t[1],u=t[2],d=0,f=[];d<o.length;d++)s=o[d],a[s]&&f.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/nem-wallet/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49d")},"0af1":function(e,t,n){},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"6fbb":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="6fbb"},"73f8":function(e,t,n){"use strict";var r=n("f97b"),a=n.n(r);a.a},"7faf":function(e,t,n){"use strict";var r=n("0af1"),a=n.n(r);a.a},"83e7":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="83e7"},cd49d:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("header",[n("span",[e._v(e._s(e.title)+" ")])]),n("main",[n("Wallet")],1)])},i=[],s=n("c665"),o=n("dc0a"),c=n("d328"),u=n("11d9"),l=n("9ab4"),d=n("60a3"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wallet"},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-card",[n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-card-title",[n("h3",[e._v("Balance")])]),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:e.isLoading},on:{click:function(t){e.getAccount()}}},[n("v-icon",[e._v("cached")])],1)],1),n("v-card-text",[e._v(e._s(e.wallet.balance)+" xem")]),n("v-card-title",[n("h3",[e._v("Address")])]),n("v-card-text",[e._v(e._s(e.wallet.address))]),n("v-card",{attrs:{flat:""}},[n("qriously",{attrs:{size:e.qrSize},model:{value:e.qrJson,callback:function(t){e.qrJson=t},expression:"qrJson"}})],1)],1),n("v-card",{attrs:{flat:""}},[e._l(e.validation,function(t,r){return n("div",{key:r,staticClass:"errorLabel"},[!0!==t?n("div",[e._v(e._s(t))]):e._e()])}),n("v-card-title",[n("h3",[e._v("Send")])]),n("v-text-field",{attrs:{label:"To address",counter:40,required:"",placeholder:"ex). NBHWRG6STRXL2FGLEEB2UOUCBAQ27OSGDTO44UFC"},model:{value:e.toAddr,callback:function(t){e.toAddr=t},expression:"toAddr"}}),n("v-text-field",{attrs:{label:"NEM",type:"number",required:""},model:{value:e.toAmount,callback:function(t){e.toAmount=t},expression:"toAmount"}}),n("v-text-field",{attrs:{label:"Message",counter:1024,placeholder:"ex) Thank you."},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("v-flex",[n("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:e.isLoading,disabled:e.isLoading},on:{click:function(t){e.tapSend()}}},[e._v("SEND")])],1),n("v-flex",[n("v-card-title",[n("h3",[e._v("Result")])]),e._v("\n          "+e._s(e.resultMessage)+"\n        ")],1)],2)],1)],1)],1)],1)},p=[],h=(n("96cf"),n("3040")),m=(n("c5f6"),n("aa9a")),v=n("a002"),b=n.n(v),g=(n("7f7f"),n("ac6a"),n("2c61")),y=n.n(g),w=function(){function e(){Object(s["a"])(this,e),this.host="https://aqualife2.supernode.me",this.port="7891",this.net=Number("104"),console.log(this.host,this.port,this.net),this.endpoint=y.a.model.objects.create("endpoint")(this.host,this.port)}return Object(m["a"])(e,[{key:"isNIS",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.a.com.requests.endpoint.heartbeat(this.endpoint);case 2:if(t=e.sent,"ok"!==t.message){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createAccount",value:function(){var e="self-made-nem-wallet",t="self-made-nem-wallet",n=y.a.model.wallet.createPRNG(e,t,this.net),r=y.a.model.objects.create("common")(t,""),a=n.accounts[0];return console.log("createAccount",a),y.a.crypto.helpers.passwordToPrivatekey(r,a,a.algo),{address:a.address,privateKey:r.privateKey}}},{key:"getAccount",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.a.com.requests.account.data(this.endpoint,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"sendNem",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,n,r,a){var i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=y.a.model.objects.create("common")("",n),s=y.a.model.objects.create("transferTransaction")(t,r,a),o=y.a.model.transactions.prepare("transferTransaction")(i,s,this.net),e.next=5,y.a.model.transactions.send(i,o,this.endpoint);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"sendMosaics",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,n,r,a){var i,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=y.a.model.objects.create("common")("",n),s=y.a.model.objects.create("transferTransaction")(t,1,a),e.next=4,this.getMosaicDefinitionMetaDataPair(this.endpoint,r);case 4:return o=e.sent,r.forEach(function(e){var t=e.namespace+":"+e.name;if(o[t].mosaicDefinition.id.namespaceId===e.namespace&&o[t].mosaicDefinition.id.name===e.name){var n=0;o[t].mosaicDefinition.properties.forEach(function(e){"divisibility"===e.name&&(n=e.value)});var r=e.amount*Math.pow(10,n),a=y.a.model.objects.create("mosaicAttachment")(e.namespace,e.name,r);s.mosaics.push(a)}}),c=y.a.model.transactions.prepare("mosaicTransferTransaction")(i,s,o,this.net),e.next=9,y.a.model.transactions.send(i,c,this.endpoint);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getMosaicDefinitionMetaDataPair",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var a=y.a.model.objects.get("mosaicDefinitionMetaDataPair"),i=0;n.forEach(function(s){var o=y.a.model.objects.create("mosaicAttachment")(s.namespace,s.name,s.amount);y.a.com.requests.namespace.mosaicDefinitions(t,o.mosaicId.namespaceId).then(function(t){i+=1;var r=y.a.utils.helpers.searchMosaicDefinitionArray(t.data,[s.name]),c=y.a.utils.format.mosaicIdToName(o.mosaicId);if(void 0!==r[c]){a[c]={},a[c].mosaicDefinition=r[c];var u=0;t.data.some(function(e){e.mosaic.id.namespaceId===s.namespace&&e.mosaic.id.name===s.name&&e.mosaic.properties.some(function(e){if("initialSupply"===e.name)return u=e.value,!0})}),a[c].supply=u,i>=n.length&&e(a)}else console.error("Mosaic not found !")}).catch(function(e){console.error(e),r(e)})})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNemDivisibility",value:function(){return Math.pow(10,6)}}]),e}(),k=function(){function e(){var t=this;Object(s["a"])(this,e),this.balance=0,this.address="",this.publicKey="",this.privateKey="",this.nem=new w,this.localStorageKey="nem-wallet",this.load().then(function(e){if(console.log(e),null===e){var n=t.nem.createAccount();t.address=n.address,t.privateKey=n.privateKey,t.save()}else t.getAccount()}).catch(function(e){console.error(e)})}return Object(m["a"])(e,[{key:"save",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.a.setItem(this.localStorageKey,this.toJSON());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.a.getItem(this.localStorageKey);case 2:return t=e.sent,null!==t&&(this.address=t.address,this.privateKey=t.privateKey,this.publicKey=t.publicKey),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.a.removeItem(this.localStorageKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.nem.getAccount(this.address);case 2:t=e.sent,this.balance=t.account.balance/this.nem.getNemDivisibility(),null!==t.account.publicKey&&(this.publicKey=t.account.publicKey);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendNem",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.nem.sendNem(t,this.privateKey,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return{address:this.address,privateKey:this.privateKey,publicKey:this.publicKey}}}]),e}(),x=n("10bf"),O=n.n(x),j=function(){function e(){Object(s["a"])(this,e)}return Object(m["a"])(e,null,[{key:"getQRcodeJson",value:function(e,t,n,r,a,i){var s={type:t,data:{name:n,addr:r,amount:a*Math.pow(10,6),msg:i},v:e};return O.a.codeToString(O.a.convert(this.getStr2Array(JSON.stringify(s)),"UTF8"))}},{key:"getStr2Array",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}}]),e}(),A=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.isLoading=!1,e.wallet=new k,e.qrSize=200,e.toAmount=0,e.toAddr="",e.message="",e.qrJson="",e.validation=[],e.resultMessage="",e.rules={senderAddrLimit:function(e){return e&&(46===e.length||40===e.length)||"送金先アドレス(-除く)は40文字です。"},senderAddrInput:function(e){var t=/^[a-zA-Z0-9-]+$/;return t.test(e)||"送金先の入力が不正です"},amountLimit:function(e){return e>=0||"数量を入力してください"},amountInput:function(e){var t=/^[0-9.]+$/;return t.test(e)&&!isNaN(Number(e))||"数量の入力が不正です"},messageRules:function(e){return e.length<=1024||"メッセージの最大文字数が超えています。"}},e}return Object(m["a"])(t,[{key:"onValueChange",value:function(e,t){this.qrJson=j.getQRcodeJson(2,2,"nem-wallet",e,0,"")}},{key:"mounted",value:function(){d["b"].prototype.$toast("Hello self made NEM wallet")}},{key:"getAccount",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.wallet.getAccount();case 3:this.isLoading=!1;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"tapSend",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.isValidation()){e.next=17;break}return this.resultMessage="",this.isLoading=!0,e.prev=3,e.next=6,this.wallet.sendNem(this.toAddr,this.toAmount,this.message);case 6:t=e.sent,n=t.message+": \n"+t.transactionHash.data,"SUCCESS"===t.message?this.resultMessage=t.transactionHash.data:this.resultMessage=t.message,d["b"].prototype.$toast(n),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),this.resultMessage=e.t0,d["b"].prototype.$toast(e.t0);case 16:this.isLoading=!1;case 17:case"end":return e.stop()}},e,this,[[3,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"isValidation",value:function(){this.validation=[],this.validation.push(this.rules.senderAddrLimit(this.toAddr)),this.validation.push(this.rules.senderAddrInput(this.toAddr)),this.validation.push(this.rules.amountLimit(this.toAmount)),this.validation.push(this.rules.amountInput("".concat(this.toAmount))),this.validation.push(this.rules.messageRules(this.message));var e=this.validation.filter(function(e){return!0!==e});return 0===e.length}}]),Object(o["a"])(t,e),t}(d["b"]);l["a"]([Object(d["c"])("wallet.address")],A.prototype,"onValueChange",null),A=l["a"]([d["a"]],A);var _=A,R=_,S=(n("73f8"),n("2877")),M=Object(S["a"])(R,f,p,!1,null,"07f2f6ee",null);M.options.__file="Wallet.vue";var N=M.exports,K=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.title="Self made NEM wallet",e}return Object(o["a"])(t,e),t}(d["b"]);K=l["a"]([Object(d["a"])({components:{Wallet:N}})],K);var D=K,E=D,T=(n("7faf"),Object(S["a"])(E,a,i,!1,null,null,null));T.options.__file="App.vue";var F=T.exports,L=n("8c4f");r["default"].use(L["a"]);var q=new L["a"]({mode:"history",base:"/nem-wallet/",routes:[]}),C=n("2f62");r["default"].use(C["a"]);var I=new C["a"].Store({state:{},mutations:{},actions:{}}),J=n("9483");Object(J["a"])("".concat("/nem-wallet/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var P=n("ce5b"),U=n.n(P),$=n("c0a4"),B=n.n($),V=(n("cc20"),n("7869")),W=n.n(V),z=n("6112"),G=n.n(z);r["default"].use(U.a,{theme:{original:B.a.purple.base,theme:"#FFDEEA",background:"#FFF6EA",view:"#ffa07a",select:"#FF7F78",button:"#5FACEF"},options:{themeVariations:["original","secondary"]}}),r["default"].use(W.a,{defaultType:"bottom",duration:3e3,wordWrap:!0,width:"280px"}),r["default"].use(G.a),r["default"].config.productionTip=!1,new r["default"]({router:q,store:I,render:function(e){return e(F)}}).$mount("#app")},f97b:function(e,t,n){}});
//# sourceMappingURL=app.c0cd83ed.js.map